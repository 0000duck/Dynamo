<html>
    <head>
        <script>
            var open = false;

function connClick(){
console.log('Click');
            if (!open) {
            var webSocket = new WebSocket('ws://localhost:2100');
 
            webSocket.onopen = function(event) {
                console.log('On open');
                open=true;
                webSocket.send('Some data from web browser');
	document.getElementById('testButton').onclick = function(){
		webSocket.send(document.getElementById('testText').value);
	};
            };
 
            webSocket.onmessage = function(event) {
                console.log('Message recived: ' + event.data);
            };
 
            webSocket.onclose = function(event) {
                open=false;
                console.log('On close');
            };
      }
else
console.log('It is already opened');
return true;
				};

        </script>
    </head>
    <body>
	<textarea rows="6" cols="20" id="testText" ></textarea><br/>
	<input type="button" id="testButton" value="Send message" />
	<input type="button" id="newConnectionButton" value="New connection" onclick="connClick();" />

                   <script src="three.min.js"></script>
		<script src="TrackballControls.js"></script>

		<script>

			var container;

			var camera, scene, renderer, controls;

			init();
			animate();

			function init() {

				renderer = new THREE.WebGLRenderer();
				renderer.setClearColor( 0xffffff );
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );

				scene = new THREE.Scene();

				camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 1000 );
				camera.position.set( 0, 0, 500 );

				controls = new THREE.TrackballControls( camera, renderer.domElement );
				controls.minDistance = 200;
				controls.maxDistance = 500;

				scene.add( new THREE.AmbientLight( 0x111111 ) );

				var light = new THREE.PointLight( 0xffffff );
				light.position = camera.position;
				scene.add( light );


				//create geometry from lines and triangles 
{
group = new THREE.Object3D();//create an empty container

//Lines (-100; 0; 0)(0; 100; 0)
var geometry = new THREE.Geometry();
    geometry.vertices.push(new THREE.Vector3(-100, 0, 0));
    geometry.vertices.push(new THREE.Vector3(0, 100, 0));

    geometry.vertices.push(new THREE.Vector3(0, 10, 0));
    geometry.vertices.push(new THREE.Vector3(100, 100, 0));

var myLine=new THREE.Line(geometry, material, THREE.LinePieces);
//scene.add( myLine );

//Triangle
var geom = new THREE.Geometry();
    var v1 = new THREE.Vector3(0,0,0);
    var v2 = new THREE.Vector3(30,0,-30);
    var v3 = new THREE.Vector3(30,30,0);
    var v4 = new THREE.Vector3(30,0,30);

    geom.vertices.push(new THREE.Vertex(v1));
    geom.vertices.push(new THREE.Vertex(v2));
    geom.vertices.push(new THREE.Vertex(v3));
     geom.vertices.push(new THREE.Vertex(v4));
    geom.faces.push( new THREE.Face3( 0, 1, 2 ) );
    geom.faces.push( new THREE.Face3( 0, 1, 3 ) );
geom.faces.push( new THREE.Face3( 1, 2, 3 ) );
geom.faces.push( new THREE.Face3( 0, 2, 3 ) );
  


    var mesh= new THREE.Mesh( geom , new THREE.LineBasicMaterial({        color: 0x0000ff    }) );
mesh.doubleSided = true;
mesh.material.side = THREE.DoubleSide;


group.add( myLine );//add a line
group.add( mesh );//add a mesh with geometry to it

scene.add( group );//when done, add the group to the scene


}				

			}

			function animate() {

				requestAnimationFrame( animate );

				controls.update();

				renderer.render( scene, camera );

			}

		</script>
    </body>
</html>